<div class="home-container">

    <h1>Popular Movies</h1>

    <!-- Search Bar -->
    <div class="search-bar">
        <input
            type="text"
            placeholder="Search for movies..."
            [(ngModel)]="searchQuery"
            (input)="onSearch()"
            aria-label="Search for movies"
        />
    </div>

    <div *ngIf="loading" class="loading-indicator">
        Loading movies...
    </div>

    <div *ngIf="error && !loading" class="error-message">
        {{ error }}
    </div>

    <div *ngIf="!loading && !error && movies.length > 0" class="movie-grid">
      <app-movie-card
            *ngFor="let movie of movies"
            [movie]="movie"
            (watchlistToggle)="toggleWatchlist($event)">
          </app-movie-card>
    </div>

    <div *ngIf="!loading && !error && movies.length === 0">
        <p>No movies found.</p>
    </div>

    <!-- Pagination Controls -->
    <div *ngIf="!loading && !error && totalPages > 0" class="pagination-controls">
        <button
            [disabled]="currentPage <= 1 || loading"
            (click)="previousPage()"
            aria-label="Go to previous page"
        >
            &laquo; Previous
        </button>

        <span> Page {{ currentPage }} of {{ totalPages }} </span>

        <button
            [disabled]="currentPage >= totalPages || loading"
            (click)="nextPage()"
            aria-label="Go to next page"
        >
            Next &raquo;
        </button>
    </div>

    <div *ngIf="!loading && !error && totalResults > 0" class="total-results">
        Total Results: {{ totalResults }} (Displaying up to 500 pages)
    </div>
</div>
